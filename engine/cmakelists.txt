project(PolarisEngine LANGUAGES CXX)

cmake_minimum_required(VERSION 3.18.0)

set(CMAKE_CXX_STANDARD 20)

if(NOT CMAKE_BUILD_TYPE)
    set(CMAKE_BUILD_TYPE "Debug")
endif()

# compile option
option(shared "build with dynamic link" ON)
option(unicode "build with unicode string" ON)
option(with_test "build with unit test" ON)
option(with_benchmark "build with benchmark" ON)

if(shared)
    add_compile_definitions(PL_SHARED)
endif()

if(unicode)
    add_compile_definitions(UNICODE)
endif()

if(${CMAKE_BUILD_TYPE} EQUAL "Debug")
    add_compile_definitions(DEBUG)
elseif(${CMAKE_BUILD_TYPE} EQUAL "RelWithDebInfo")
    add_compile_definitions(DEVELOPMENT)
elseif(${CMAKE_BUILD_TYPE} EQUAL "Release")
    add_compile_definitions("SHIPPING")
endif()

# add cmake find path

list(APPEND CMAKE_MODULE_PATH ${CMAKE_BINARY_DIR})
list(APPEND CMAKE_MODULE_PATH ${CMAKE_BINARY_DIR}/source/core)
list(APPEND CMAKE_PREFIX_PATH ${CMAKE_BINARY_DIR})

#add sub dir

include(${CMAKE_SOURCE_DIR}/cmake/conan.cmake)

add_subdirectory(source)